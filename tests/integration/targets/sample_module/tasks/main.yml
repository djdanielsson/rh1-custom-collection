---
# Integration tests for sample_module
- name: Test sample_module with default parameters
  myorg.custom_collection.sample_module:
    name: "test"
  register: result

- name: Verify module returned success
  ansible.builtin.assert:
    that:
      - result is success
      - result is changed

- name: Test sample_module with custom message
  myorg.custom_collection.sample_module:
    name: "test"
    message: "Custom test message"
  register: result_custom

- name: Verify custom message
  ansible.builtin.assert:
    that:
      - result_custom is success
      - result_custom is changed

- name: Test sample_module idempotency
  myorg.custom_collection.sample_module:
    name: "test"
  register: result_idempotent

- name: Verify idempotency
  ansible.builtin.assert:
    that:
      - result_idempotent is not changed
    fail_msg: "Module should be idempotent"

- name: Test sample_module error handling
  myorg.custom_collection.sample_module:
    name: ""
  register: result_error
  ignore_errors: true

- name: Verify error handling
  ansible.builtin.assert:
    that:
      - result_error is failed
      - "'name cannot be empty' in result_error.msg"
    fail_msg: "Module should handle errors properly"



